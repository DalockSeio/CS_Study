### TCP와 UDP
#### 2.2.1 TCP란
* 송신부와 수신부의 연결을 확인하는 연결형 서비스
* 패킷 교환 방식
  * 가상 회선방식: 패킷이 전달되는 회선이 정해져 있는 방식
  * 데이터그램 방식: 최적의 경로로 전송되는 방식, 보낸 패킷과 도착한 패킷의 순서가 다를 수 있다
* 패킷의 수신 여부를 확인
* 송신부와 수신부의 1:1 통신
* 데이터 손실이 없음을 보장하므로 신뢰성이 높다
* 송수신 속도가 느리다

#### 2.2.2 TCP 핸드셰이킹
> 연결을 시작할 때는 3-way 핸드셰이킹을 연결을 종료할 때는 4-way 핸드셰이킹을 한다. 송신부와 수신부 간 연결을 제어 및 관리하도록 flag 값을 주고 받는다. flag 값의 종류는 다음과 같다.

* SYN : 연결을 생성할 때 사용
* FIN : 연결을 끊을 때 사용
* ACK : 승인의 약자로 데이터를 전송하면 수신자가 받았음을 알려줄 때 사용
* RST : 연결을 재설정할 때 사용
* PSH : 빠른 응답이 필요한 데이터를 응용 계층으로 전송할 때 사용
* URG : 다른 데이터가 우선순위가 높은 데이터를 전송할 때 사용

##### 3-way 핸드셰이킹
> 데이터를 본격적으로 주고받기 전에 상대방 컴퓨터와 세션을 수립하는 과정

1. 송신부가 수신부와 연결하기 위해 SYN 메시지를 보내는데, 이때 임의의 숫자 N을 함께 보낸다.
2. 연결 요청을 수락하는 의미인 ACK메시지를 전송한다. 
   ACK 메시지에는 송신부로부터 받은 N에 +1을 한 값을 함께 보낸다. 
   수신부에서도 송신분와의 연결을 확인하기 위해 SYN 메시지에 임의의 숫자인 M을 함께 보낸다
   
3. ACK 메시지와 수신부로부터 받은 M에 +1을 한 값을 함께 보낸다. 이때 송신부에 전송하려는 데이터가 포함될 수 있다.

##### 4-way 핸드셰이킹
> TCP 연결을 해제할 때 이뤄지는 과정이다.

1. 송신부가 수신부와의 연결을 종료하려고 FIN 메시지를 보낸다
2. 수신부가 송신부로부터 FIN 메시지를 받으면 이에 대한 응답으로 ACK 메시지를 보낸다
수신부는 메시지를 보낸 후 앱을 종료하기 위한 작업을 한다
3. 수신부에서 연결을 종료할 준비가 끝나면 송신부에 FIN 메시지를 보낸다
4. 송신부는 서버로부터 받은 FIN 메시지에 응답하기 위해 ACK 메시지를 보낸다
FIN 메시지 전에 보낼 패킷이 FIN 메시지 수신보다 지연되어 발생하는 패킷 유실에 대비한다
또한, 수신부에서 ACK 메시지가 제대로 전달되지 않아 연결해제가 이뤄지지 않는 경우도 대비한다
