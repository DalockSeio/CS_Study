## 가상 메모리

### 1.5.1 가상 메모리란
> 프로세스의 일부만 메모리에 로드하고, 나머지는 디스크에 둔 상태로 프로세스를 실행하는 방식

⭐가상메모리의 필요성
1. 실행되는 프로세스는 모두 물리 메모리에 올라와 있어야 하는데 여러개의 프로세스를 사용하는 환경에서는 물리 메모리를 나눠서 사용하기 때문에 각 프로세스에 할당되는 물리 메모리의 크기가 줄어든다
2. 다른 프로세스를 올려야 하는데 물리 메모리 공간이 부족해지면 물리 메모리에 존재하던 프로세스를 스왑 영역으로 내쫓고 사용하게 되는데 이런 경우에는 빈번하게 스왑 영역과 입출력이 발생하게 된다
3. 물리 메모리 크기를 벗어나는 프로세스라면 실행조차 불가능하다

❓자주 사용되지 않는 방어 코드, 관리 코드까지 비효울적을 모두 물리메모리에 올릴 필요가 있을까 
❓필요한 내용만 물리 메모리에 올리고 사용하면 안될까
-> 가상 메모리 개념 등장


⭐장점
* 프로그램이 메모리 크기에 대한 제약을 덜 받을 수 있다
* 동시에 많은 프로그램을 실행하므로 CPU 이용률과 처리율을 높일 수 있다
* 필요한 영역만 메모리에 로드해 스와핑 횟수를 줄여서 프로그램 실행 속도를 높일 수 있다

### 1.5.2 요구 페이징
> 
프로세스에서 필요한 페이지만 메모리에 로드하는 방식

>
주소공간이 하나의 단위가 아니라 여러 개의 페이지로 나뉘어져 있다
그 중에서 당장 필요한 페이지들만 물리메모리에 적재하여 사용하고 필요하지 않는 페이지는 디스크에 저장한다

⭐페이지 폴트
프로그램을 실행하다가 물리 메모리에 필요한 페이지가 없을 때를 말한다

* 페이지에 해당하는 메모리 영역이 물리 메모리에 있는지는 페이지 테이블로 파악한다
  * v(valid) : 페이지에 해당하는 프레임이 존재
  * i(invalid) : 프레임이 존재하지 않거나 유효하지 않은 주소값

![페이지폴트 이미지](https://images.velog.io/images/infoqoch/post/220b9920-e6ea-4373-b75a-8b5f25f9901f/image.png)

### 1.5.3 스레싱
> 동시에 일정 수 이상의 프로그램을 실행했을 때 오히려 CPU 이용률이 떨어지는 상황

> 일정 수 이상으로 다중 프로그래밍을 하면 페이지 폴트가 자주 일어나고 따라서 디스크 영역에서 필요한 페이지를 스왑 인하고 불필요한 페이지를 스왑아웃하는 작업도 자주 하게 되어 CPU 이용률이 떨어지는 스레싱이 발생

⭐이를 예방하기 나온 것이 **워킹 세트**이다
> 지역성을 기반으로 자주 사용하는 페이지를 저장해 두어 페이지 폴트가 빈번하게 발생하는 현상을 방지
